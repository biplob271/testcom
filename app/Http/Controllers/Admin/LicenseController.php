<?php
 namespace App\Http\Controllers\Admin; use App\Http\Controllers\Controller; use Illuminate\Http\Request; use Session; use App\Models\License; class LicenseController extends Controller { public static function index() { $data = License::where("\151\144", 1)->get()->first(); if (!empty($data->api_key)) { if (Session::has("\163\164\141\164\165\x73")) { return LicenseController::licenseCheck(session("\163\164\x61\x74\x75\163")); } else { return LicenseController::sessionApi(); } } else { return view("\x61\144\155\151\x6e\56\x6c\151\143\145\x6e\163\x65\56\154\x69\143\145\x6e\163\x65"); } } public static function Edit() { return view("\141\x64\155\151\156\x2e\x6c\x69\x63\x65\x6e\x73\x65\x2e\x6c\x69\x63\145\156\x73\145"); } public static function sessionApi() { $host = Request()->getHost(); $data = License::get()->first(); $key = $data->api_key; $post = array("\x70\162\157\x64\x75\143\x74\x5f\156\141\x6d\x65" => "\x65\x64\165\146\151\156", "\141\x70\151\x5f\153\145\x79" => $key, "\144\x6f\x6d\x61\151\156" => $host); $ch = curl_init("\x68\164\x74\160\163\72\57\57\143\157\x64\x65\162\163\x79\x73\x2e\x63\x6f\x6d\57\x61\x70\x69\57\x6c\x69\143\x65\x6e\163\x65"); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_POSTFIELDS, $post); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); $response = curl_exec($ch); curl_close($ch); Session::put("\163\164\141\x74\x75\x73", $response); return AdminController::index(); } public static function licenseCheck($data) { if ($data == "\x76\141\154\x69\144") { return view("\141\144\x6d\151\156\56\x69\156\144\x65\x78"); } else { $msg = "\x45\122\122\117\122\x2d\40\x4c\151\143\x65\156\163\145\x20\151\156\x76\x61\x6c\151\x64\40\x50\x6c\145\x61\x73\x65\40\166\x69\163\151\x74\x20\x63\x6f\x64\x65\x72\163\171\163\56\143\157\155\40\157\162\40\x63\x61\x6c\154\x20\x30\x39\x36\61\63\40\62\x34\x37\60\x33\64"; return view("\x66\162\x6f\x6e\x74\145\x6e\144\x2e\x34\x30\x34", compact("\155\x73\147")); } } }